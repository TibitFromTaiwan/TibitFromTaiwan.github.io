<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>TRACKER</title>
    </head>
    <style>
        * {
            font-family: monospace;
            background: #000;
            color: #0f0;
        }
        .submit {
            background-color: white;
            color: #000;
            padding: 5px;
            border-radius: 2px;
            font-family: sans-serif;
        }
    </style>
    <body></body>
    <script>
        var startTimeInMs = Date.now()
        const hexStr = '0123456789ABCDEF'
        var resArr = []
        for (var i = 0; i < 128; i++) {
            res = ''
            for (var ti = 0; ti < 64; ti++) {
                rdn = Math.floor(Math.random() * 16)
                res += hexStr[rdn]
            }
            resArr.push(res)
        }

        appendText = (text, timeout = 500) => {
            setTimeout(() => {
                var node = document.createElement('p')
                var timeNow = Date.now()
                node.innerText = `[${timeNow - startTimeInMs}] ${text}`
                document.body.appendChild(node)
            }, timeout)
        }

        appendText('Initializing', 0)
        appendText('Getting user data', 300)
        appendText('Checking current status', 500)
        appendText('Getting screen monitor permission...', 600)
        appendText('Getting screen monitor permission succeed', 800)
        appendText('Getting keyboard tracking permission...', 900)
        appendText('Getting keyboard tracking permission succeed', 1200)
        appendText('Authorization passed.', 1500)
        for (var i = 0; i < 15; i++) {
            res = ''
            for (var ti = 0; ti < 64; ti++) {
                rdn = Math.floor(Math.random() * 16)
                res += hexStr[rdn]
            }
            appendText('Get Test Data : ' + res, 2000 + i * 20)
        }
        appendText('Start Monitoring ...', 3000)

        setTimeout(() => {
            var node = document.createElement('a')
            node.setAttribute('class', 'submit')
            node.innerText = 'Download monitor file'
            node.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(resArr.join('\n')))
            node.setAttribute('download', 'res.jkf')
            document.body.appendChild(node)
        }, 3200)
    </script>
</html>
